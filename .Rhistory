get_headcount <- function(.data, date_val){
date_val <- as.Date(date_val)
.data %>%
mutate(status = case_when(hire_date <= {{ date_val }} ~ 1,
TRUE ~ NA_real_),
status = case_when(termination_date > {{ date_val }} |
is.na(termination_date) ~ status,
termination_date < {{ date_val }} ~ 0)) %>%
# group_by(status, .add=TRUE) %>%
# count() %>%
# filter(status == "active") %>%
# ungroup() %>%
# select(- status)
summarize(headcount = sum(status, na.rm=TRUE))
# "0" = Terminated PRIOR to the supplied date.
# "1" = Active as of the supplied date.
# NA = Either no term date, Term date ON the supplied date, or a term date in the future.
}
library(devtools)
use_r("get_headcount")
load_all()
load_all()
load_all()
check()
check()
use_mit_license()
library(readr)
WF_Assessment_Data <- read_csv("C:/Users/2371328/Downloads/WF_Assessment_Data.csv")
View(WF_Assessment_Data)
library(tidyverse)
WF_Assessment_Data <- WF_Assessment_Data %>%
select(-...12, -...13)
View(WF_Assessment_Data)
View(WF_Assessment_Data)
WFM_tms_play <- WF_Assessment_Data
save(WFM_tms_play, file = "data/WFM_tms_play.Rda")
names(WFM_tms_play)
WFM_tms_play <-WFM_tms_play %>%
janitor::clean_names()
names(WFM_tms_play)
load_all()
document()
load_all()
library(TIAHelpers)
load_all()
document()
TIAHelpers::WFM_tms_play
load_all()
document()
load_all()
WF_Assessment_Data <- read_csv("C:/Users/2371328/Downloads/WF_Assessment_Data.csv")
WF_Assessment_Data <- WF_Assessment_Data %>%
select(-...12, -...13)
WFM_tms_play <- WF_Assessment_Data
wfm_tms_play <-WFM_tms_play %>%
janitor::clean_names()
save(WFM_tms_play, file = "data/wfm_tms_play.Rda")
names(wfm_tms_play)
load_all()
document()
usethis::use_data(wfm_tms_play)
usethis::use_data(wfm_tms_play, overwrite = TRUE)
document()
load_all()
wfm_tms_play %>%
get_headcount("2022-01-01")
wfm_tms_play
wfm_tms_play <- wfm_tms_play %>%
mutate(hire_date == lubridate::ymd(hire_date))
wfm_tms_play <- wfm_tms_play %>%
mutate(hire_date == lubridate::mdY(hire_date))
wfm_tms_play <- wfm_tms_play %>%
mutate(hire_date == lubridate::mdy(hire_date))
wfm_tms_play <- wfm_tms_play %>%
mutate(hire_date = lubridate::mdy(hire_date))
View(wfm_tms_play)
wfm_tms_play <-WFM_tms_play %>%
janitor::clean_names()
wfm_tms_play <- wfm_tms_play %>%
mutate(hire_date = lubridate::mdy(hire_date)) %>%
mutate(termination_date = lubridate::mdy(termination_date))
WF_Assessment_Data <- read_csv("C:/Users/2371328/Downloads/WF_Assessment_Data.csv")
WF_Assessment_Data <- WF_Assessment_Data %>%
select(-...12, -...13)
WFM_tms_play <- WF_Assessment_Data
wfm_tms_play <-WFM_tms_play %>%
janitor::clean_names()
wfm_tms_play <- wfm_tms_play %>%
mutate(hire_date = lubridate::mdy(hire_date)) %>%
mutate(termination_date = lubridate::mdy(termination_date))
usethis::use_data(wfm_tms_play, overwrite = TRUE)
document()
load_all()
wfm_tms_play %>%
get_headcount("2022-01-01")
wfm_tms_play %>%
group_by(region) %>%
get_headcount("2022-01-01")
document()
use_package("tidyverse")
use_package("dplyr")
document()
load_all()
